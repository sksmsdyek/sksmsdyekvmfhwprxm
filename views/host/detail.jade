extends ../layout
block main
    link(href="/stylesheets/freelancer.min.css" rel="stylesheet")
    .container         
            
              .row#row
                  .col-lg-8.col-lg-offset-2
                      .modal-body
                          h2= host.title
                          |                             
                          hr.star-primary
                          |                             
                          img.img-responsive(src='/#{host.picturePath}', alt = 'picture')
                          p
                            sapn 도시 : #{host.city}                             
                          p
                            sapn 주소 : #{host.address}
                          p
                            sapn 주소번호 : #{host.addressnumber}
                          p
                            sapn 요금 : #{host.cost}
                          p
                            sapn 편의시설 : #{host.market}  
                          p
                            sapn 이용규칙 : #{host.rule}  
                          p
                            sapn 설명 : #{host.content}

                          p
                            sapn 최대 숙박 인원 : #{host.count}
                          p
                            span 호스팅 날짜 : #{moment(host.createdAt).format('YYYY-MM-DD HH:mm:ss')}          
                          p  
                            span 예약 가능 날짜 : #{moment(host.startdate).format('YYYY-MM-DD') + "부터" + moment(host.deaddate).format('YYYY-MM-DD')}
                          p                     
                            button.btn.btn-default(type='button', data-dismiss='modal')
                              i.fa.fa-times
                              a(href='/')  Close


                              
             .row
                if(currentUser.root)
                  h3 댓글
                  table.table
                    tr
                      th Name
                      th Commnet
                      th time
                      

                    each comment in comments
                      tr
                        td= comment.guest_name
                        td= comment.comment
                        td= moment(comment.createdAt).format('YYYY/MM/DD')
                      tr
                        td.button.btn.btn-primary(data-id=comment.id, class='delete') 삭제
                        td= comment.root_comment
                      tr    
                        td.form.form-inline(action='/host/' + host.id + '/detail', method='POST')
                            .form-group
                              input.form-control(name='root_comment', size=15, placeholder='comment')
                            button.btn.btn-info 답글저장
                        

                else if(currentUser)
                  h3 댓글
                  table.table
                    tr
                      th Name
                      th Commnet
                      th time

                    each comment in comments
                      tr
                        td= comment.guest_name
                        td= comment.comment
                        td= moment(comment.createdAt).format('YYYY/MM/DD')

                  .row  
                      form.form-inline(action='/host/' + host.id + '/detail', method='POST')
                        .form-group
                          input.form-control(name='comment', size=50, placeholder='comment')
                        button.btn.btn-info 댓글저장
    

        .col-md-2.side
          include ./sidedetail


        
        form#deleteForm(style='display:none', method="POST")
                
        script(type='text/javascript').
            $(".delete").click(function(e) {
                var id = $(e.currentTarget).data('id');
                if (confirm('정말 삭제하시겠습니까?')) {
                $("#deleteForm").attr('action', "/host/" + id + "/commentdelete?_method=DELETE").submit();          
                }
                return false;
            });